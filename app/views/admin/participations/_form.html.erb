<%= render partial: 'form_buttons', locals: { form: } %>

<% if entry.errors.any? %>
  <div class="alert alert-danger">
    <ul class="list-unstyled mb-0">
      <% entry.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<div class="card mb-4">
  <div class="card-body">
    <h3 class="card-title">
      <%= Participation.human_attribute_name :authority %>
    </h3>

    <div class="mb-2 row">
      <%= form.label :authority_name, class: 'col-2 col-form-label' %>
      <div class="col">
        <%= form.text_field :authority_name, class: 'form-control' %>
        <%= show_error_messages form.object, :authority_name %>
      </div>
    </div>

    <div class="mb-2 row">
      <%= form.label :authority_address, class: 'col-2 col-form-label' %>
      <div class="col">
        <%= form.text_area :authority_address, class: 'form-control' %>
        <%= show_error_messages form.object, :authority_address %>
      </div>
    </div>

    <div class="row">
      <%= form.label :authority_email, class: 'col-2 col-form-label' %>
      <div class="col">
        <%= form.text_field :authority_email, class: 'form-control' %>
        <%= show_error_messages form.object, :authority_email %>
      </div>
    </div>
  </div>
</div>

<div class="card mb-4">
  <div class="card-body">
    <h3 class="card-title">
      <%= Participation.human_attribute_name :contact, name: Settings::Client.name %>
    </h3>

    <div class="mb-2 row">
      <%= form.label :contact_name, class: 'col-2 col-form-label' %>
      <div class="col">
        <%= form.text_field :contact_name, class: 'form-control' %>
        <%= show_error_messages form.object, :contact_name %>
      </div>
    </div>

    <div class="mb-2 row">
      <%= form.label :contact_email, class: 'col-2 col-form-label' %>
      <div class="col">
        <%= form.text_field :contact_email, class: 'form-control' %>
        <%= show_error_messages form.object, :contact_email %>
      </div>
    </div>

    <div class="row">
      <%= form.label :contact_phone, class: 'col-2 col-form-label' %>
      <div class="col">
        <%= form.text_field :contact_phone, class: 'form-control' %>
        <%= show_error_messages form.object, :contact_phone %>
      </div>
    </div>
  </div>
</div>

<div class="card mb-4">
  <div class="card-body">
    <h3 class="card-title">
      <%= Participation.human_attribute_name :partner %>
    </h3>

    <div class="mb-2 row">
      <%= form.label :status, class: 'col-2 col-form-label' %>
      <div class="col">
        <% Participation.statuses.each do |status, ix| -%>
          <div class="form-check">
            <%= form.label "status_#{status}", '', class: 'form-check-label' do %>
              <%= form.radio_button :status, status %>
              <%= Participation.human_enum_name :status, status %>
            <% end -%>
          </div>
        <% end -%>
      </div>
    </div>

    <div class="mb-2 row">
      <%= form.label :partner_number, class: 'col-2 col-form-label' %>
      <div class="col">
        <%= form.text_field :partner_number, class: 'form-control' %>
        <%= show_error_messages form.object, :partner_number %>
      </div>
    </div>

    <div class="mb-2 row">
      <%= form.label :name_of_the_signatory, class: 'col-2 col-form-label' %>
      <div class="col">
        <%= form.text_area :name_of_the_signatory, class: 'form-control' %>
        <%= show_error_messages form.object, :name_of_the_signatory %>
      </div>
    </div>

    <div class="mb-2 row">
      <%= form.label :official_email_authority, class: 'col-2 col-form-label' %>
      <div class="col">
        <%= form.text_field :official_email_authority, class: 'form-control' %>
        <%= show_error_messages form.object, :official_email_authority %>
      </div>
    </div>

    <div class="mb-2 row">
      <%= form.label :role, class: 'col-2 col-2 col-form-label' %>
      <div class="col">
        <% Participation.roles.each do |role, ix| -%>
          <div class="form-check">
            <%= form.label "role_#{role}", '', class: 'form-check-label' do %>
              <%= form.radio_button :role, role %>
              <%= Participation.human_enum_name :role, role %>
            <% end -%>
          </div>
        <% end -%>
      </div>
    </div>

    <div class="mb-2 row">
      <%= form.label :effectiveness_date, class: 'col-2 col-form-label' %>
      <div class="col">
        <%= form.date_field :effectiveness_date, class: 'form-control' %>
        <%= show_error_messages form.object, :effectiveness_date %>
      </div>
    </div>

    <div class="mb-2 row">
      <%= form.label :withdrawal_receipt_date, class: 'col-2 col-form-label' %>
      <div class="col">
        <%= form.date_field :withdrawal_receipt_date, class: 'form-control' %>
        <%= show_error_messages form.object, :withdrawal_receipt_date %>
      </div>
    </div>

    <div class="mb-2 row">
      <%= form.label :withdrawal_name_of_the_signatory, class: 'col-2 col-form-label' %>
      <div class="col">
        <%= form.text_field :withdrawal_name_of_the_signatory, class: 'form-control' %>
        <%= show_error_messages form.object, :withdrawal_name_of_the_signatory %>
      </div>
    </div>

    <div class="mb-2 row">
      <%= form.label :withdrawal_effectiveness_date, class: 'col-2 col-form-label' %>
      <div class="col">
        <%= form.date_field :withdrawal_effectiveness_date, class: 'form-control' %>
        <%= show_error_messages form.object, :withdrawal_effectiveness_date %>
      </div>
    </div>

    <div class="row">
      <%= form.label :withdrawal_effectiveness_date_corrected, class: 'col-2 col-form-label' %>
      <div class="col">
        <%= form.date_field :withdrawal_effectiveness_date_corrected, class: 'form-control' %>
        <%= show_error_messages form.object, :withdrawal_effectiveness_date_corrected %>
      </div>
    </div>
  </div>
</div>

<% if Current.user.role_admin? %>
  <div class="card mb-4">
    <div class="card-body">
      <h3 class="card-title">
        <%= Participation.human_attribute_name :leading_cooperation_partner %>
      </h3>

      <div class="mb-2 row">
        <%= form.label :leading_cooperation_partner_name, class: 'col-2 col-form-label' %>
        <div class="col">
          <%= form.text_field :leading_cooperation_partner_name, class: 'form-control' %>
          <%= show_error_messages form.object, :leading_cooperation_partner_name %>
        </div>
      </div>

      <div class="mb-2 row">
        <%= form.label :leading_cooperation_partner_address, class: 'col-2 col-form-label' %>
        <div class="col">
          <%= form.text_area :leading_cooperation_partner_address, class: 'form-control' %>
          <%= show_error_messages form.object, :leading_cooperation_partner_address %>
        </div>
      </div>

      <div class="row">
        <%= form.label :leading_cooperation_partner_email, class: 'col-2 col-form-label' %>
        <div class="col">
          <%= form.text_field :leading_cooperation_partner_email, class: 'form-control' %>
          <%= show_error_messages form.object, :leading_cooperation_partner_email %>
        </div>
      </div>
    </div>
  </div>
<% end -%>

<%= render partial: 'form_buttons', locals: { form: } %>
